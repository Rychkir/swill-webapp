<!DOCTYPE html>
<html>
<head>
    <title>CryptoWin Games</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #1a1a2e; color: white; font-family: Arial; padding: 20px; }
        .section { background: #2d2d44; padding: 20px; margin: 10px 0; border-radius: 15px; }
        button { background: #ffd700; border: none; padding: 15px; margin: 5px; 
                border-radius: 10px; cursor: pointer; width: 100%; font-size: 16px; }
        button:disabled { background: #666; cursor: not-allowed; }
        .balance { font-size: 24px; text-align: center; margin: 20px 0; }
        .slots { font-size: 40px; text-align: center; margin: 20px 0; }
        .game-result { text-align: center; margin: 10px 0; font-size: 18px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: none; }
        .win { color: #4CAF50; }
        .lose { color: #f44336; }
        .loading { color: #ffd700; }
        .success { color: #4CAF50; }
    </style>
</head>
<body>
    <div class="balance">üí∞ –ë–∞–ª–∞–Ω—Å: <span id="balance">100</span> –º–æ–Ω–µ—Ç</div>
    
    <div class="section">
        <h3>üé∞ –ò–ì–†–û–í–´–ï –ê–í–¢–û–ú–ê–¢–´</h3>
        <div class="slots">
            <span id="slot1">üçí</span>
            <span id="slot2">üçí</span>
            <span id="slot3">üçí</span>
        </div>
        <button onclick="spinSlots()" id="slots-btn">üé∞ –ö—Ä—É—Ç–∏—Ç—å (10 –º–æ–Ω–µ—Ç)</button>
        <div class="game-result" id="slots-result"></div>
    </div>

    <div class="section">
        <h3>üî¢ –£–ì–ê–î–ê–ô –ß–ò–°–õ–û</h3>
        <input type="number" id="numberGuess" placeholder="–ß–∏—Å–ª–æ –æ—Ç 1000 –¥–æ 9999" min="1000" max="9999">
        <button onclick="guessNumber()" id="number-btn">üéØ –£–≥–∞–¥–∞—Ç—å (20 –º–æ–Ω–µ—Ç)</button>
        <div class="game-result" id="number-result"></div>
    </div>

    <div class="section">
        <h3>üé≤ –ö–û–°–¢–ò</h3>
        <input type="number" id="diceGuess" placeholder="–°—É–º–º–∞ –æ—Ç 2 –¥–æ 12" min="2" max="12">
        <button onclick="rollDice()" id="dice-btn">üé≤ –ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏ (15 –º–æ–Ω–µ—Ç)</button>
        <div class="game-result" id="dice-result"></div>
    </div>

    <div class="section">
        <h3>üí∞ –ö–û–®–ï–õ–ï–ö</h3>
        <button onclick="showWallet()">üí≥ –ú–æ–π –∫–æ—à–µ–ª–µ–∫</button>
        <button onclick="withdrawFunds()">üí∏ –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</button>
        <button onclick="convertToStars()">‚≠ê –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∑–≤–µ–∑–¥—ã</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
        let userBalance = 100;
        document.getElementById('balance').textContent = userBalance;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ –∏–≥—Ä
        function updateBalance(newBalance) {
            userBalance = newBalance;
            document.getElementById('balance').textContent = userBalance;
        }
        
        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        function setButtonLoading(buttonId, isLoading) {
            const button = document.getElementById(buttonId);
            if (button) {
                button.disabled = isLoading;
                if (isLoading) {
                    button.setAttribute('data-original-text', button.textContent);
                    button.textContent = '‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞...';
                } else {
                    button.textContent = button.getAttribute('data-original-text') || button.textContent;
                }
            }
        }
        
        // üé∞ –°–õ–û–¢–´
        function spinSlots() {
            if (userBalance < 10) {
                document.getElementById('slots-result').textContent = "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 10 –º–æ–Ω–µ—Ç";
                document.getElementById('slots-result').className = "game-result lose";
                return;
            }
            
            const btn = document.getElementById('slots-btn');
            setButtonLoading('slots-btn', true);
            
            document.getElementById('slots-result').textContent = "üé∞ –ö—Ä—É—Ç–∏–º...";
            document.getElementById('slots-result').className = "game-result loading";
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            updateBalance(userBalance - 10);
            
            sendToBot({action: 'game', type: 'slots', bet: 10});
            
            // –ê–≤—Ç–æ—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                setButtonLoading('slots-btn', false);
                document.getElementById('slots-result').textContent = "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç!";
                document.getElementById('slots-result').className = "game-result success";
            }, 3000);
        }
        
        // üî¢ –£–ì–ê–î–ê–ô –ß–ò–°–õ–û  
        function guessNumber() {
            const guess = document.getElementById('numberGuess').value;
            if(!guess || guess < 1000 || guess > 9999) {
                document.getElementById('number-result').textContent = "‚ùå –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1000 –¥–æ 9999";
                document.getElementById('number-result').className = "game-result lose";
                return;
            }
            
            if (userBalance < 20) {
                document.getElementById('number-result').textContent = "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 20 –º–æ–Ω–µ—Ç";
                document.getElementById('number-result').className = "game-result lose";
                return;
            }
            
            const btn = document.getElementById('number-btn');
            setButtonLoading('number-btn', true);
            
            document.getElementById('number-result').textContent = "üî¢ –ü—Ä–æ–≤–µ—Ä—è–µ–º...";
            document.getElementById('number-result').className = "game-result loading";
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            updateBalance(userBalance - 20);
            
            sendToBot({action: 'game', type: 'number', guess: parseInt(guess), bet: 20});
            
            setTimeout(() => {
                setButtonLoading('number-btn', false);
                document.getElementById('number-result').textContent = "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç!";
                document.getElementById('number-result').className = "game-result success";
            }, 3000);
        }
        
        // üé≤ –ö–û–°–¢–ò
        function rollDice() {
            const guess = document.getElementById('diceGuess').value;
            if(!guess || guess < 2 || guess > 12) {
                document.getElementById('dice-result').textContent = "‚ùå –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –æ—Ç 2 –¥–æ 12";
                document.getElementById('dice-result').className = "game-result lose";
                return;
            }
            
            if (userBalance < 15) {
                document.getElementById('dice-result').textContent = "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 15 –º–æ–Ω–µ—Ç";
                document.getElementById('dice-result').className = "game-result lose";
                return;
            }
            
            const btn = document.getElementById('dice-btn');
            setButtonLoading('dice-btn', true);
            
            document.getElementById('dice-result').textContent = "üé≤ –ë—Ä–æ—Å–∞–µ–º...";
            document.getElementById('dice-result').className = "game-result loading";
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            updateBalance(userBalance - 15);
            
            sendToBot({action: 'game', type: 'dice', guess: parseInt(guess), bet: 15});
            
            setTimeout(() => {
                setButtonLoading('dice-btn', false);
                document.getElementById('dice-result').textContent = "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç!";
                document.getElementById('dice-result').className = "game-result success";
            }, 3000);
        }
        
        // üí∞ –ö–û–®–ï–õ–ï–ö
        function showWallet() {
            sendToBot({action: 'wallet_info'});
            alert('üíº –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º');
        }
        
        function withdrawFunds() {
            if (userBalance < 1000) {
                alert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤! –ú–∏–Ω–∏–º—É–º 1000 –º–æ–Ω–µ—Ç, —É –≤–∞—Å ${userBalance}`);
                return;
            }
            sendToBot({action: 'withdraw'});
            alert('üí∏ –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º');
        }
        
        function convertToStars() {
            if (userBalance < 500) {
                alert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 500 –º–æ–Ω–µ—Ç, —É –≤–∞—Å ${userBalance}`);
                return;
            }
            sendToBot({action: 'convert_stars'});
            // –í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            updateBalance(userBalance - 500);
            alert('‚≠ê –ó–∞–ø—Ä–æ—Å –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º');
        }
        
        // üì§ –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• –ë–û–¢–£
        function sendToBot(data) {
            tg.sendData(JSON.stringify(data));
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ—Ç—ã –ø—Ä–∏ –∫–ª–∏–∫–µ
        function updateSlots() {
            const symbols = ['üçí', 'üçã', 'üçä', '‚≠ê', 'üîî', 'üíé', 'üçá', 'ü•ù'];
            document.getElementById('slot1').textContent = symbols[Math.floor(Math.random() * symbols.length)];
            document.getElementById('slot2').textContent = symbols[Math.floor(Math.random() * symbols.length)];
            document.getElementById('slot3').textContent = symbols[Math.floor(Math.random() * symbols.length)];
        }
        
        // –ê–Ω–∏–º–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        setInterval(updateSlots, 500);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—á–∏—â–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setInterval(() => {
            const results = ['slots-result', 'number-result', 'dice-result'];
            results.forEach(id => {
                const element = document.getElementById(id);
                if (element && (element.textContent.includes('–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω') || element.className.includes('success'))) {
                    element.textContent = "";
                    element.className = "game-result";
                }
            });
        }, 5000);
        
        // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
        setTimeout(() => {
            document.getElementById('numberGuess').value = '';
            document.getElementById('diceGuess').value = '';
        }, 3500);
    </script>
</body>
</html>
