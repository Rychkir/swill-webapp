<!DOCTYPE html>
<html>
<head>
    <title>CryptoWin Casino</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: linear-gradient(135deg, #0c0c2e, #1a1a4a); 
            color: white; 
            font-family: 'Arial', sans-serif; 
            padding: 15px;
            min-height: 100vh;
        }
        
        .header { 
            text-align: center; 
            margin-bottom: 20px; 
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .balance-container {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            gap: 10px;
        }
        
        .balance-item {
            flex: 1;
            background: rgba(255,215,0,0.2);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid gold;
        }
        
        .balance-number {
            font-size: 24px;
            font-weight: bold;
            color: gold;
            margin-top: 5px;
        }
        
        .section { 
            background: rgba(255,255,255,0.1); 
            padding: 20px; 
            margin: 10px 0; 
            border-radius: 15px; 
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        button { 
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border: none; 
            padding: 15px; 
            margin: 5px 0; 
            border-radius: 10px; 
            cursor: pointer; 
            width: 100%; 
            font-size: 16px; 
            font-weight: bold;
            color: #000;
            transition: all 0.3s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,215,0,0.4);
        }
        
        button:disabled { 
            background: #666; 
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .slots-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            perspective: 1000px;
        }
        
        .slot {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border: 3px solid gold;
            transform-style: preserve-3d;
            transition: transform 0.5s ease;
        }
        
        .slot.spinning {
            animation: spin 0.1s infinite;
        }
        
        @keyframes spin {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(360deg); }
        }
        
        .game-result { 
            text-align: center; 
            margin: 15px 0; 
            font-size: 18px; 
            min-height: 25px;
        }
        
        input { 
            width: 100%; 
            padding: 12px; 
            margin: 10px 0; 
            border-radius: 8px; 
            border: 2px solid gold;
            background: rgba(255,255,255,0.9);
            font-size: 16px;
        }
        
        .win { color: #4CAF50; font-weight: bold; }
        .lose { color: #f44336; }
        .loading { color: #FFD700; }
        .success { color: #4CAF50; }
        
        .wallet-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .withdraw-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
        }
        
        .convert-btn {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé∞ CryptoWin Casino</h1>
    </div>
    
    <div class="balance-container">
        <div class="balance-item">
            <div>üí∞ –ú–æ–Ω–µ—Ç—ã</div>
            <div class="balance-number" id="coins-balance">1000</div>
        </div>
        <div class="balance-item">
            <div>‚≠ê –ó–≤–µ–∑–¥—ã</div>
            <div class="balance-number" id="stars-balance">5</div>
        </div>
    </div>
    
    <div class="section">
        <h3>üé∞ –ò–ì–†–û–í–´–ï –ê–í–¢–û–ú–ê–¢–´</h3>
        <div class="slots-container">
            <div class="slot" id="slot1">üéÅ</div>
            <div class="slot" id="slot2">üíé</div>
            <div class="slot" id="slot3">üí∞</div>
        </div>
        <button onclick="spinSlots()" id="slots-btn">üé∞ –ö—Ä—É—Ç–∏—Ç—å –∑–∞ 10 –º–æ–Ω–µ—Ç</button>
        <div class="game-result" id="slots-result"></div>
    </div>

    <div class="section">
        <h3>üéØ –£–ì–ê–î–ê–ô –ß–ò–°–õ–û</h3>
        <input type="number" id="numberGuess" placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1000 –¥–æ 9999" min="1000" max="9999">
        <button onclick="guessNumber()" id="number-btn">üéØ –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É (20 –º–æ–Ω–µ—Ç)</button>
        <div class="game-result" id="number-result"></div>
    </div>

    <div class="section">
        <h3>üé≤ –ö–û–°–¢–ò –£–î–ê–ß–ò</h3>
        <input type="number" id="diceGuess" placeholder="–°—É–º–º–∞ –æ—Ç 2 –¥–æ 12" min="2" max="12">
        <button onclick="rollDice()" id="dice-btn">üé≤ –ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏ (15 –º–æ–Ω–µ—Ç)</button>
        <div class="game-result" id="dice-result"></div>
    </div>

    <div class="section">
        <h3>üíº –ú–û–ô –ö–û–®–ï–õ–ï–ö</h3>
        <div class="wallet-buttons">
            <button onclick="showWallet()">üí≥ –ò–Ω—Ñ–æ –∫–æ—à–µ–ª—å–∫–∞</button>
            <button onclick="withdrawFunds()" class="withdraw-btn">üí∏ –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</button>
            <button onclick="convertToStars()" class="convert-btn">‚≠ê 500 –º–æ–Ω–µ—Ç ‚Üí 1 –∑–≤–µ–∑–¥–∞</button>
            <button onclick="convertFromStars()" class="convert-btn">‚ú® 1 –∑–≤–µ–∑–¥–∞ ‚Üí 500 –º–æ–Ω–µ—Ç</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        
        // –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let userData = {
            coins: 1000,
            stars: 5
        };
        
        // –°–∏–º–≤–æ–ª—ã –¥–ª—è —Å–ª–æ—Ç–æ–≤ (–ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ)
        const slotSymbols = ['üéÅ', 'üíé', 'üí∞', 'üëë', '‚ö°', 'üåü', 'üî•', 'üçÄ'];
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        function updateBalanceDisplay() {
            document.getElementById('coins-balance').textContent = userData.coins;
            document.getElementById('stars-balance').textContent = userData.stars;
        }
        
        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        function setButtonLoading(buttonId, isLoading) {
            const button = document.getElementById(buttonId);
            if (button) {
                button.disabled = isLoading;
                if (isLoading) {
                    button.setAttribute('data-original-text', button.textContent);
                    button.textContent = '‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞...';
                } else {
                    button.textContent = button.getAttribute('data-original-text') || button.textContent;
                }
            }
        }
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤
        function spinSlotsAnimation(duration = 2000) {
            const slots = ['slot1', 'slot2', 'slot3'];
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –≤—Ä–∞—â–µ–Ω–∏—è
            slots.forEach(slotId => {
                document.getElementById(slotId).classList.add('spinning');
            });
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
            setTimeout(() => {
                slots.forEach(slotId => {
                    document.getElementById(slotId).classList.remove('spinning');
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
                    const randomSymbol = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                    document.getElementById(slotId).textContent = randomSymbol;
                });
            }, duration);
        }
        
        // üé∞ –°–õ–û–¢–´
        function spinSlots() {
            if (userData.coins < 10) {
                showResult('slots-result', "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 10 –º–æ–Ω–µ—Ç", 'lose');
                return;
            }
            
            const btn = document.getElementById('slots-btn');
            setButtonLoading('slots-btn', true);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            spinSlotsAnimation(2000);
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º –±–∞–ª–∞–Ω—Å
            userData.coins -= 10;
            updateBalanceDisplay();
            
            showResult('slots-result', "üé∞ –ë–∞—Ä–∞–±–∞–Ω—ã –∫—Ä—É—Ç—è—Ç—Å—è...", 'loading');
            
            sendToBot({action: 'game', type: 'slots', bet: 10});
            
            setTimeout(() => {
                setButtonLoading('slots-btn', false);
                showResult('slots-result', "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º!", 'success');
            }, 2500);
        }
        
        // üî¢ –£–ì–ê–î–ê–ô –ß–ò–°–õ–û  
        function guessNumber() {
            const guess = document.getElementById('numberGuess').value;
            if(!guess || guess < 1000 || guess > 9999) {
                showResult('number-result', "‚ùå –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1000 –¥–æ 9999", 'lose');
                return;
            }
            
            if (userData.coins < 20) {
                showResult('number-result', "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 20 –º–æ–Ω–µ—Ç", 'lose');
                return;
            }
            
            const btn = document.getElementById('number-btn');
            setButtonLoading('number-btn', true);
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º –±–∞–ª–∞–Ω—Å
            userData.coins -= 20;
            updateBalanceDisplay();
            
            showResult('number-result', "üéØ –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞—à—É —Å—Ç–∞–≤–∫—É...", 'loading');
            
            sendToBot({action: 'game', type: 'number', guess: parseInt(guess), bet: 20});
            
            setTimeout(() => {
                setButtonLoading('number-btn', false);
                showResult('number-result', "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º!", 'success');
                document.getElementById('numberGuess').value = '';
            }, 2000);
        }
        
        // üé≤ –ö–û–°–¢–ò
        function rollDice() {
            const guess = document.getElementById('diceGuess').value;
            if(!guess || guess < 2 || guess > 12) {
                showResult('dice-result', "‚ùå –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –æ—Ç 2 –¥–æ 12", 'lose');
                return;
            }
            
            if (userData.coins < 15) {
                showResult('dice-result', "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ 15 –º–æ–Ω–µ—Ç", 'lose');
                return;
            }
            
            const btn = document.getElementById('dice-btn');
            setButtonLoading('dice-btn', true);
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º –±–∞–ª–∞–Ω—Å
            userData.coins -= 15;
            updateBalanceDisplay();
            
            showResult('dice-result', "üé≤ –ë—Ä–æ—Å–∞–µ–º –∫–æ—Å—Ç–∏...", 'loading');
            
            sendToBot({action: 'game', type: 'dice', guess: parseInt(guess), bet: 15});
            
            setTimeout(() => {
                setButtonLoading('dice-btn', false);
                showResult('dice-result', "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º!", 'success');
                document.getElementById('diceGuess').value = '';
            }, 2000);
        }
        
        // üí∞ –ö–û–®–ï–õ–ï–ö
        function showWallet() {
            sendToBot({action: 'wallet_info'});
            showAlert('üíº –ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ—à–µ–ª—å–∫–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º');
        }
        
        function withdrawFunds() {
            if (userData.coins < 1000) {
                showAlert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞! –ú–∏–Ω–∏–º—É–º 1000 –º–æ–Ω–µ—Ç, —É –≤–∞—Å ${userData.coins}`);
                return;
            }
            sendToBot({action: 'withdraw'});
            showAlert('üí∏ –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º');
        }
        
        function convertToStars() {
            if (userData.coins < 500) {
                showAlert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏! –ù—É–∂–Ω–æ 500 –º–æ–Ω–µ—Ç, —É –≤–∞—Å ${userData.coins}`);
                return;
            }
            sendToBot({action: 'convert_stars'});
            // –í—Ä–µ–º–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
            userData.coins -= 500;
            userData.stars += 1;
            updateBalanceDisplay();
            showAlert('‚≠ê –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è 500 –º–æ–Ω–µ—Ç –≤ 1 –∑–≤–µ–∑–¥—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º');
        }
        
        function convertFromStars() {
            if (userData.stars < 1) {
                showAlert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏! –ù—É–∂–Ω–æ 1 –∑–≤–µ–∑–¥–∞, —É –≤–∞—Å ${userData.stars}`);
                return;
            }
            // –í—Ä–µ–º–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
            userData.stars -= 1;
            userData.coins += 500;
            updateBalanceDisplay();
            showAlert('‚ú® –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è 1 –∑–≤–µ–∑–¥—ã –≤ 500 –º–æ–Ω–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º');
        }
        
        // üì§ –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• –ë–û–¢–£
        function sendToBot(data) {
            tg.sendData(JSON.stringify(data));
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `game-result ${type}`;
        }
        
        function showAlert(message) {
            alert(message);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateBalanceDisplay();
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—á–∏—â–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setInterval(() => {
            const results = ['slots-result', 'number-result', 'dice-result'];
            results.forEach(id => {
                const element = document.getElementById(id);
                if (element && element.textContent.includes('–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω')) {
                    element.textContent = "";
                    element.className = "game-result";
                }
            });
        }, 5000);
        
        // –°–ª—É—á–∞–π–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)
        setTimeout(() => {
            spinSlotsAnimation(1000);
        }, 500);
    </script>
</body>
</html>
